<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]--><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="Asciidoctor 1.5.4"><title>phase0</title><link rel="stylesheet" href="./asciidoctor.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
<link rel="stylesheet" href="./coderay-asciidoctor.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css"></head><body class="article toc2 toc-left"><div id="header"><div id="toolbar"><a href="https://github.com/jMonkeyEngine/wiki/edit/master/src/docs/asciidoc/jme3/atomixtuts/mmorpg/phase0.adoc"><i class="fa fa-pencil-square" aria-hidden="true"></i></a><a href="https://github.com/jMonkeyEngine/wiki/new/master/src/docs/asciidoc/jme3/atomixtuts/mmorpg/"><i class="fa fa-plus-square" aria-hidden="true"></i></a><input dir="auto" style="position: relative; vertical-align: top;" spellcheck="false" autocomplete="off" class="searchbox__input aa-input" id="doc-search" name="search" placeholder="Search in the doc" required="required" type="search"></div><h1>phase0</h1><div class="details"><span class="author" id="author"></span><br><span id="revnumber">version ,</span> <span id="revdate">2016/03/17 20:48</span></div><div id="toc" class="toc2"><div id="toctitle">Table of Contents</div><ul class="sectlevel1"><li><a href="#phase-0">Phase 0</a></li><li><a href="#detail">Detail</a><ul class="sectlevel2"><li><a href="#arianne">Arianne</a></li><li><a href="#marauroa-and-stendhal-base-architecture">Marauroa and Stendhal base architecture</a></li><li><a href="#plan">Plan</a></li></ul></li><li><a href="#concepts">Concepts</a></li><li><a href="#assets-2">Assets</a><ul class="sectlevel2"><li><a href="#3d">3D</a></li><li><a href="#textures">Textures</a></li><li><a href="#animations">Animations</a></li></ul></li><li><a href="#programming">Programming</a></li><li><a href="#use-of-tools">Use of tools</a><ul class="sectlevel2"><li><a href="#something-to-try">Something to try</a></li></ul></li></ul></div></div><div id="content"><div class="sect1"><h2 id="phase-0">Phase 0</h2><div class="sectionbody"><div class="paragraph"><p><strong>Start:</strong> July 1st - August 1st
<strong>Tasks:</strong></p></div>
<div class="olist arabic"><ol class="arabic"><li><p>Search for free and open assets</p></li><li><p>Setup MORPG engine Arriane</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>Port from 2D to 3D</p></li></ol></div></li><li><p>Try and review.</p></li></ol></div>
<div class="paragraph"><p><strong>Features:</strong>
<strong>Bugs:</strong></p></div>
<div class="paragraph"><p>Google code Issues tracker:</p></div></div></div>
<div class="sect2"><h3 id="detail">Detail</h3><div class="sect2"><h3 id="arianne">Arianne</h3><div style="text-align: center;" class="imageblock"><div class="content"><img src="http://stendhalgame.org/wiki/images/3/34/Stendhal_0_65_fuzzy.png" alt="Stendhal_0_65_fuzzy.png" width="" height=""></div></div>
<div class="paragraph"><p>Another framework which is much small scale than Three rings is Arianne.
<a href="http://sourceforge.net/projects/arianne/">http://sourceforge.net/projects/arianne/</a></p></div>
<div class="paragraph"><p>In the phase Zero, I decided to use Arianne instead of Three rings. Why?</p></div>
<div class="paragraph"><p>As I&#8217;m working in a game company, I&#8217;ve learnt by heart the importance of Game Design document and Workflow. And I also have fews failure attempts in the past as hobbist game developer with small team try to make BIG thing due to lack of these.</p></div>
<div class="sect3"><h4 id="so-why-arianne">So Why Arianne?</h4><div class="paragraph"><p>Because it&#8217;s Open source, simple, have enough features, easy to deploy, test, and most important very well documented compare to Three rings.</p></div></div>
<div class="sect3"><h4 id="features">Features</h4><div class="paragraph"><p>*
*      Stendhal - MORPG featuring hundreds of NPCs and quests
*      Stendhal - Huge and beautiful world to explore
*      Stendhal - Statistics website and Hall of Fame
*      Marauroa - Game server handling client-server communication
*      Marauroa - Database persistence with asychronous access
*      Marauroa - Flexibility of game rules. Apply to drawing boards, card games, PacMan …
*      Keep It Simple approach
*      Release early, release often
*      Automatic client updates
*      Detailed tutorials to extend Stendhal or get started with Marauroa
*      Supportive development team in <abbr title="Internet Relay Chat">IRC</abbr></p></div>
<div class="paragraph"><p>It&#8217;s wiki with a lot of tutorials of making Quest and NPC, scripting:
<a href="http://stendhalgame.org/wiki/">http://stendhalgame.org/wiki/</a></p></div></div></div>
<div class="sect2"><h3 id="marauroa-and-stendhal-base-architecture">Marauroa and Stendhal base architecture</h3><div class="paragraph"><p><a href="https://stendhalgame.org/wiki/Marauroa_Core_API">https://stendhalgame.org/wiki/Marauroa_Core_API</a></p></div>
<div class="paragraph"><p><a href="https://stendhalgame.org/wiki/RolePlayingDesign">https://stendhalgame.org/wiki/RolePlayingDesign</a></p></div>
<div class="paragraph"><p><a href="https://stendhalgame.org/wiki/NetworkDesign">https://stendhalgame.org/wiki/NetworkDesign</a></p></div>
<div class="paragraph"><p><a href="https://stendhalgame.org/wiki/HowToWriteAdventureGamesUsingArianne#Multiplayer_fun">https://stendhalgame.org/wiki/HowToWriteAdventureGamesUsingArianne#Multiplayer_fun</a></p></div>
<div class="admonitionblock important"><table><tr><td class="icon"><i class="fa icon-important" title="Important"></i></td><td class="content"><div class="paragraph"><p>Copy from Stendhal wiki</p></div></td></tr></table></div>
<div class="sect3"><h4 id="main-entities">Main entities</h4><div class="paragraph"><p>The main entities you should know about are:</p></div>
<div class="ulist"><ul><li><p>Attributes</p></li><li><p>RPAction</p></li><li><p>RPObject</p></li><li><p>RPSlot</p></li><li><p>RPClass</p></li><li><p>IRPZone interface</p></li><li><p>IRPRuleProcessor interface</p></li><li><p>RPWorld</p></li></ul></div></div>
<div class="sect3"><h4 id="role-playing-design">Role Playing Design</h4><div class="paragraph"><p>is the determining factor on how easy is to create a new game for Arianne. We had to choose easing the creation of turn time limited based games. Arianne will work better with this kind of games (also known as realtime games).</p></div>
<div class="literalblock"><div class="content"><pre>Role Playing Design tries to be generic and game agnostic (independant of the game being made). The very basic idea behind RPManager is:</pre></div></div>
<div class="literalblock"><div class="content"><pre>forever
  {
  Execute Actions
  Send Perceptions
  Wait for next turn
  }</pre></div></div>
<div class="paragraph"><p>To achieve this we use several classes:</p></div>
<div class="paragraph"><p><strong>RPManager</strong> is coded in Marauroa and doesn&#8217;t need to be modified.</p></div>
<div class="paragraph"><p><strong>IRPRuleProcessor</strong> is the interface that you need to modify in order to personalize the actions that your game will execute.</p></div>
<div class="paragraph"><p><strong>RPWorld</strong> is the class that you need to extend inorder to implement the onInit and onFinish methods which personalize what happens when you initialise the server and what happens when you close the server.</p></div>
<div class="paragraph"><p><strong>IRPZone</strong> is an interface that you could implement if you wanted to achive the highest personalization possible of the engine, however, I would use MarauroaRPZone instead as that uses our great <strong>Delta2</strong> feature.</p></div></div>
<div class="sect3"><h4 id="actions">Actions</h4><div class="paragraph"><p>To express the willingness of a client to do something it must send the server a MessageC2SAction message.</p></div>
<div class="paragraph"><p>An action is composed of several attributes. (an attribute is similar to a variable in that it has a name and contains a value).</p></div>
<div class="paragraph"><p>There are optional and mandatory attributes. If a mandatory attribute is not found, the message is skipped by the RPServerManager.</p></div>
<div class="paragraph"><p>Mandatory Action Attributes are action_id and type.</p></div>
<div class="paragraph"><p>The action_id is used to identify the action when a resulting response comes in a perception</p></div></div>
<div class="sect3"><h4 id="perceptions">Perceptions</h4><div class="paragraph"><p>The basic structure for sending world updates to clients is called perceptions.</p></div>
<div class="paragraph"><p>There are two types of perception:</p></div>
<div class="literalblock"><div class="content"><pre>  Sync perceptions: these are used to synchronize clients with the server world representation. This is the only valid way of knowing world's status.
  Delta perception: this is used to send only the changes to the world since the last perception.</pre></div></div>
<div class="paragraph"><p>Our actual Perception system is called Delta2. It is heavily attached to the Marauroa core, so I recommend you to use it :)
How Perceptions and Actions work</p></div>
<div class="paragraph"><p>Actions are sent from the client to the server in order to make the character perform an action. In order for the client to know the result of the action the Server needs to send a reply to the client. How will this be done?</p></div>
<div class="paragraph"><p>In a first attempt, we send clients back an action that was the result of their action. However, this made the code really hard because we had to update two different things, perceptions and actions. Instead the solution appears intuitively: Why not join action reply and perceptions.</p></div>
<div class="paragraph"><p>So the action reply is stored inside each object (that executed the action ) with a set of attributes that determine the action return status and the attributes. This way of doing replies makes it a bit harder on RPManager but it simplifies the creation of new clients a lot.</p></div>
<div class="paragraph"><p>See Actions reply in the Objects documentation to know exactly what is returned. However, keep in mind that the return result depends of each particular game.
Delta2 perception Algorithm</p></div>
<div class="paragraph"><p>The idea behind the DPA is to avoid sending ALL the objects to a client each time, but only those that have been modified.</p></div>
<div class="paragraph"><p>Imagine that we have 1000 objects, and only O1 and O505 are active objects that are modified each turn.</p></div>
<div class="paragraph"><p>The Traditional method:</p></div>
<div class="ulist"><ul><li><p>- Get objects that our player should see ( 1000 objects )</p></li><li><p>- Send them to player ( 1000 objects )</p></li><li><p>- Next turn</p></li><li><p>- Get objects that our player should see ( 1000 objects )</p></li><li><p>- Send them to player</p></li><li><p>- Next turn</p></li></ul></div>
<div class="paragraph"><p>…</p></div>
<div class="paragraph"><p>I hope you see the problem… we are sending objects that haven&#8217;t changed each turn.</p></div>
<div class="paragraph"><p>The delta perception algorithm:</p></div>
<div class="ulist"><ul><li><p>Get objects that our player should see ( 1000 objects )</p></li><li><p>Reduce the list to the modified ones ( 1000 objects )</p></li><li><p>Store also the objects that are not longer visible ( 0 objects )</p></li><li><p>Send them to player ( 1000 objects )</p></li><li><p>Next turn</p></li><li><p>Get objects that our player should see ( 1000 objects )</p></li><li><p>Reduce the list to the modified ones ( 2 objects )</p></li><li><p>Store also the objects that are not longer visible ( 0 objects )</p></li><li><p>Send them to player ( 2 objects )</p></li><li><p>Next turn</p></li><li><p>…</p></li></ul></div>
<div class="paragraph"><p>The next step of the delta perception algorithm is pretty clear: delta2 The idea is to send only what changes of the objects that changed. This way we save even more bandwidth, making perceptions around 20% of the original delta perception size.</p></div>
<div class="paragraph"><p>The delta2 algorithm is based on four containers:</p></div>
<div class="ulist"><ul><li><p>List of added objects</p></li><li><p>List of modified added attributes of objects</p></li><li><p>List of modified deleted attributes of objects</p></li><li><p>List of deleted objects</p></li></ul></div></div></div>
<div class="sect2"><h3 id="plan">Plan</h3><div class="paragraph"><p>My initial plan for the phase Zero is to create a port to 3d version of the existed game Stendhal with free 3d models and 3d gameplay. Then I let the team go in, try and discuss, learn, design as much as possible before we going futher.</p></div>
<div class="sect3"><h4 id="assets">Assets</h4><div class="paragraph"><p>In the first attempt, 3d enviroment and models will use open art website such as:
Blendswap <a href="http://blendswap.com">http://blendswap.com</a>
OpengameArt <a href="http://opengameart.com">http://opengameart.com</a></p></div>
<div class="paragraph"><p>and other resources to quick made up a workable game (client and server) to test and enjoy.</p></div></div>
<div class="sect3"><h4 id="from-arianne-to-jme3">From Arianne to jME3</h4><div class="paragraph"><p>The reusable:</p></div>
<div class="ulist"><ul><li><p>Network: Good for small scale game</p></li><li><p>DB: MySQL or integrated H2</p></li><li><p>Almost gameplay: Enities definition, Quest, Scripting</p></li><li><p>They also have a complete website for the game with tutorials, wiki</p></li></ul></div>
<div class="paragraph"><p>The different between a 2d and 3d, Arianne an jME3 engine:</p></div>
<div class="paragraph"><p>*
*      Replace the Arianne game loop with jME3 states and update loop.
*      Delete the Render task of the game view JPanel
*      Terrain : I have my own tiled Terrain implement in jME3 for almost top-down game.
*      Characters: Use 3D Models of Open Art resource
*      <abbr title="Graphical User Interface">GUI</abbr> : Use pure swing gui (port to Nifty later)
*      2d to 3d Gameplay: Map entities, trigger
*      2d to 3d Picking : I use a simple translation</p></div></div></div></div>
<div class="sect1"><h2 id="concepts">Concepts</h2><div class="sectionbody"><div class="paragraph"><p>Pictures</p></div>
<div class="paragraph"><p>Videos</p></div></div></div>
<div class="sect2"><h3 id="assets-2">Assets</h3><div class="sect2"><h3 id="3d">3D</h3></div>
<div class="sect2"><h3 id="textures">Textures</h3></div>
<div class="sect2"><h3 id="animations">Animations</h3></div></div>
<div class="sect1"><h2 id="programming">Programming</h2><div class="sectionbody"></div></div>
<div class="sect2"><h3 id="use-of-tools">Use of tools</h3><div class="sect2"><h3 id="something-to-try">Something to try</h3><div class="sect3"><h4 id="citygen-dungeon-maker">CityGen dungeon maker</h4></div></div></div></div><div id="footer"><div id="footer-text">Version <br>Last updated 2017-11-14 05:28:25 +00:00</div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script><script>docsearch({
  apiKey: 'a736b6d93de805e26ec2f49b55013fbd',
  indexName: 'jmonkeyengine',
  inputSelector: '#doc-search',
  debug: false // Set debug to true if you want to inspect the dropdown
});</script></body></html>