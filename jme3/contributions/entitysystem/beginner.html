<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]--><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="Asciidoctor 1.5.4"><title>Zay-ES Beginner Tutorial</title><link rel="stylesheet" href="./asciidoctor.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
<link rel="stylesheet" href="./coderay-asciidoctor.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css"></head><body class="article toc2 toc-left"><div id="header"><div id="toolbar"><a href="https://github.com/jMonkeyEngine/wiki/edit/master/src/docs/asciidoc/jme3/contributions/entitysystem/beginner.adoc"><i class="fa fa-pencil-square" aria-hidden="true"></i></a><a href="https://github.com/jMonkeyEngine/wiki/new/master/src/docs/asciidoc/jme3/contributions/entitysystem/"><i class="fa fa-plus-square" aria-hidden="true"></i></a><input dir="auto" style="position: relative; vertical-align: top;" spellcheck="false" autocomplete="off" class="searchbox__input aa-input" id="doc-search" name="search" placeholder="Search in the doc" required="required" type="search"></div><h1>Zay-ES Beginner Tutorial</h1><div class="details"><span class="author" id="author"></span><br><span id="revnumber">version ,</span> <span id="revdate">2016/03/17 20:48</span></div><div id="toc" class="toc2"><div id="toctitle">Table of Contents</div><ul class="sectlevel1"><li><a href="#sample-code">Sample Code</a><ul class="sectlevel2"><li><a href="#description-of-the-sample">Description of the sample</a></li></ul></li><li><a href="#create-a-component-class">Create a Component Class</a></li><li><a href="#initialize-the-entity-system">Initialize the Entity System</a></li><li><a href="#creating-entitys-and-adding-components">Creating Entitys and adding Components</a></li><li><a href="#the-entity-class">The Entity Class</a></li><li><a href="#replacing-a-component">Replacing a component</a></li><li><a href="#delete-an-entity">Delete an entity</a><ul class="sectlevel2"><li><a href="#entity-sets">Entity Sets</a></li></ul></li></ul></div></div><div id="content"><div id="preamble"><div class="sectionbody"><div class="paragraph"><p>In this article we explain the first steps how to work with Zay-ES and what you should know about the background.</p></div>
<div class="paragraph"><p>If you are new Entity Systems please read the <a href="../../../jme3/contributions/entitysystem/introduction.html">Entity System Introduction</a> first.</p></div></div></div>
<div class="sect2"><h3 id="sample-code">Sample Code</h3><div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">import</span> <span class="include">com.simsilica.es.Entity</span>;
<span class="keyword">import</span> <span class="include">com.simsilica.es.EntityData</span>;
<span class="keyword">import</span> <span class="include">com.simsilica.es.EntityId</span>;
<span class="keyword">import</span> <span class="include">com.simsilica.es.base.DefaultEntityData</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">Main</span> {

    <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {

        <span class="comment">//Creating the EntityData</span>
        EntityData entityData = <span class="keyword">new</span> DefaultEntityData();

        <span class="comment">//Creates a new EntityId, the id is handled as an object to prevent botching</span>
        EntityId entityId = entityData.createEntity();
        <span class="comment">//A new TestComponent is added to the Entity</span>
        entityData.setComponent(entityId, <span class="keyword">new</span> TestComponent(<span class="string"><span class="delimiter">&quot;</span><span class="content">Hello World</span><span class="delimiter">&quot;</span></span>));

        <span class="comment">//Get a new Entity Object with TestComponents</span>
        <span class="predefined-type">Entity</span> entity = entityData.getEntity(entityId, TestComponent.class);
        <span class="comment">//Get the Component and display the value</span>
        TestComponent testComponent = entity.get(TestComponent.class);
        <span class="predefined-type">System</span>.out.println(testComponent.getValue());

        <span class="comment">//Overwrite the existing component</span>
        entity.set(<span class="keyword">new</span> TestComponent(<span class="string"><span class="delimiter">&quot;</span><span class="content">New Value</span><span class="delimiter">&quot;</span></span>));
        <span class="predefined-type">System</span>.out.println(testComponent.getValue());

        <span class="comment">//Remove the Entity from the data</span>
        entityData.removeEntity(entity.getId());
    }
}</code></pre></div></div>
<div class="sect2"><h3 id="description-of-the-sample">Description of the sample</h3></div></div>
<div class="sect1"><h2 id="create-a-component-class">Create a Component Class</h2><div class="sectionbody"><div class="paragraph"><p>You simply create a component by implementing the EntityComponent interface:</p></div>
<div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">TestComponent</span> <span class="directive">implements</span> EntityComponent {

    <span class="directive">private</span> <span class="predefined-type">String</span> value;

    <span class="directive">public</span> TestComponent(<span class="predefined-type">String</span> value)
    {
        <span class="local-variable">this</span>.value=value;
    }

    <span class="directive">public</span> <span class="predefined-type">String</span> getValue()
    {
        <span class="keyword">return</span> value;
    }
}</code></pre></div></div>
<div class="paragraph"><p>But there are some rules you must consider:
Components only have a constructor and getter.
It is important that you only store pure data in the components because otherwise you would no longer know where you can find the logic and the approach of a clear software design would get lost.
Besides an entity can only have one component of the same class.</p></div>
<div class="admonitionblock important"><table><tr><td class="icon"><i class="fa icon-important" title="Important"></i></td><td class="content"><div class="paragraph"><p>Beginners tend to add large objects like spatials and geometries to a component.
This is a big mistake because such objects contain logic and in our approach components are data only. Abstract it to a general level or store it completely in the systems.</p></div></td></tr></table></div>
<div class="admonitionblock important"><table><tr><td class="icon"><i class="fa icon-important" title="Important"></i></td><td class="content"><div class="paragraph"><p>Never subclass Component classes.</p></div></td></tr></table></div></div></div>
<div class="sect1"><h2 id="initialize-the-entity-system">Initialize the Entity System</h2><div class="sectionbody"><div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java"> EntityData entityData = <span class="keyword">new</span> DefaultEntityData();</code></pre></div></div>
<div class="paragraph"><p>The EntityData is the main class of the entity system.  All the data are stored here.</p></div>
<div class="paragraph"><p>How the entityData works:</p></div>
<div class="paragraph"><p>For every component class a new Hashmap is created which contains the entityId as a key and the component as a value. Therefore, if you need to know all entities which own a component of a certain type, the system will search in these Hashmaps for the required entityIds.</p></div></div></div>
<div class="sect1"><h2 id="creating-entitys-and-adding-components">Creating Entitys and adding Components</h2><div class="sectionbody"><div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java"><span class="comment">//Creates a new EntityId, the id is handled as an object to prevent botching</span>
EntityId entityId = entityData.createEntity();
<span class="comment">//A new TestComponent is added to the Entity</span>
entityData.setComponent(entityId, <span class="keyword">new</span> TestComponent(<span class="string"><span class="delimiter">&quot;</span><span class="content">Hello World</span><span class="delimiter">&quot;</span></span>));</code></pre></div></div>
<div class="paragraph"><p>EntityIds are a objects which contain a long value. Zay-ES uses this objects to prevent users from writing dirty code.</p></div>
<div class="paragraph"><p>Every entity has a unique id which is a long.
Ids are not reused because, if they were, they would not be unique anymore, which would cause a huge penalty.</p></div>
<div class="admonitionblock tip"><table><tr><td class="icon"><i class="fa icon-tip" title="Tip"></i></td><td class="content"><div class="paragraph"><p>Often people are scared that they will run out of ids:
If you create a new entity every nano second, you would need roughly 585 years before it wraps.</p></div></td></tr></table></div></div></div>
<div class="sect1"><h2 id="the-entity-class">The Entity Class</h2><div class="sectionbody"><div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java"><span class="comment">//Get a new Entity Object with TestComponents</span>
<span class="predefined-type">Entity</span> entity = entityData.getEntity(entityId, TestComponent.class);
<span class="comment">//Get the Component and display the value</span>
TestComponent testComponent = entity.get(TestComponent.class);
<span class="predefined-type">System</span>.out.println(testComponent.getValue());</code></pre></div></div>
<div class="paragraph"><p>If you want to work with entities, the EntityData is able to create Entity objects. This objects contains
all the Components of the classes you are interested in. In this example it is only the TestComponent.class.
You can have multiple Entity objects for the same entity.</p></div>
<div class="admonitionblock important"><table><tr><td class="icon"><i class="fa icon-important" title="Important"></i></td><td class="content"><div class="paragraph"><p>The data of this Entity objects will not be updated if other classes change the components for this entity</p></div></td></tr></table></div></div></div>
<div class="sect1"><h2 id="replacing-a-component">Replacing a component</h2><div class="sectionbody"><div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java"><span class="comment">//Overwrite the existing component</span>
entity.set(<span class="keyword">new</span> TestComponent(<span class="string"><span class="delimiter">&quot;</span><span class="content">New Value</span><span class="delimiter">&quot;</span></span>));
<span class="predefined-type">System</span>.out.println(testComponent.getValue());</code></pre></div></div></div></div>
<div class="sect2"><h3 id="delete-an-entity">Delete an entity</h3><div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java"><span class="comment">//Remove the Entity from the data</span>
entityData.removeEntity(entity.getId());</code></pre></div></div>
<div class="sect2"><h3 id="entity-sets">Entity Sets</h3><div class="paragraph"><p>The most important feature of Zay-ES are the Entity Sets.
It is strongly recommended that you read the <a href="../../../jme3/contributions/entitysystem/entityset.html">Entity Set tutorial</a> after reading this article.</p></div>
<div class="admonitionblock important"><table><tr><td class="icon"><i class="fa icon-important" title="Important"></i></td><td class="content"><div class="paragraph"><p>Read the <a href="../../../jme3/contributions/entitysystem/entityset.html">tutorial</a> about entity sets</p></div></td></tr></table></div></div></div></div><div id="footer"><div id="footer-text">Version <br>Last updated 2017-11-14 05:28:25 +00:00</div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script><script>docsearch({
  apiKey: 'a736b6d93de805e26ec2f49b55013fbd',
  indexName: 'jmonkeyengine',
  inputSelector: '#doc-search',
  debug: false // Set debug to true if you want to inspect the dropdown
});</script></body></html>