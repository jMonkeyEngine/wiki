<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]--><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="Asciidoctor 1.5.4"><title>customcontrols</title><link rel="stylesheet" href="./asciidoctor.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
<link rel="stylesheet" href="./coderay-asciidoctor.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css"></head><body class="article toc2 toc-left"><div id="header"><div id="toolbar"><a href="https://github.com/jMonkeyEngine/wiki/edit/master/src/docs/asciidoc/jme3/contributions/tonegodgui/customcontrols.adoc"><i class="fa fa-pencil-square" aria-hidden="true"></i></a><a href="https://github.com/jMonkeyEngine/wiki/new/master/src/docs/asciidoc/jme3/contributions/tonegodgui/"><i class="fa fa-plus-square" aria-hidden="true"></i></a><input dir="auto" style="position: relative; vertical-align: top;" spellcheck="false" autocomplete="off" class="searchbox__input aa-input" id="doc-search" name="search" placeholder="Search in the doc" required="required" type="search"></div><h1>customcontrols</h1><div class="details"><span class="author" id="author"></span><br><span id="revnumber">version ,</span> <span id="revdate">2016/03/17 20:48</span></div><div id="toc" class="toc2"><div id="toctitle">Table of Contents</div><ul class="sectlevel1"><li><a href="#creating-custom-controls">Creating Custom Controls</a><ul class="sectlevel2"><li><a href="#a-reusable-contextual-menu">A Reusable Contextual Menu</a></li><li><a href="#adding-our-new-control-to-the-screen">Adding Our New Control to the Screen</a></li><li><a href="#extending-the-window-class-to-utilize-our-control">Extending the Window Class to Utilize Our Control</a></li></ul></li></ul></div></div><div id="content"><div class="sect2"><h3 id="creating-custom-controls">Creating Custom Controls</h3><div class="paragraph"><p>In this section, I&#8217;m going to walk you through creating a custom control and hopefully pass along a few tip and help standardize how controls are built.  This way (if you feel so inclined) you can share your controls with other and all will know exactly how to use your control.</p></div>
<div class="sect2"><h3 id="a-reusable-contextual-menu">A Reusable Contextual Menu</h3><div class="paragraph"><p>We&#8217;re going to be building a reusable contextual right-click menu that will:</p></div>
<div class="ulist"><ul><li><p>lock and unlock certain features of a standard window/panel</p></li><li><p>Allow you to add/remove menu items specific to each window as it is called.</p></li></ul></div>
<div class="sect3"><h4 id="step-1-adding-the-framework-for-the-new-class">STEP 1: Adding the framework for the new class.</h4><div class="paragraph"><p>First, we&#8217;ll set up the class and add the three standard constructors.  We&#8217;ll be using the default Menu style information.  The class will remain abstract to leverage the existing callback method of the super class Menu.</p></div>
<div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="directive">abstract</span> <span class="type">class</span> <span class="class">ContextualMenu</span> <span class="directive">extends</span> <span class="predefined-type">Menu</span> {
    <span class="directive">public</span> ContextualMenu(Screen screen, <span class="predefined-type">String</span> <span class="predefined-type">UID</span>, Vector2f position, <span class="type">boolean</span> isScrollable) {
        <span class="local-variable">this</span>(screen, <span class="predefined-type">UID</span>, position,
            screen.getStyle(<span class="string"><span class="delimiter">&quot;</span><span class="content">Menu</span><span class="delimiter">&quot;</span></span>).getVector2f(<span class="string"><span class="delimiter">&quot;</span><span class="content">defaultSize</span><span class="delimiter">&quot;</span></span>),
            screen.getStyle(<span class="string"><span class="delimiter">&quot;</span><span class="content">Menu</span><span class="delimiter">&quot;</span></span>).getVector4f(<span class="string"><span class="delimiter">&quot;</span><span class="content">resizeBorders</span><span class="delimiter">&quot;</span></span>),
            screen.getStyle(<span class="string"><span class="delimiter">&quot;</span><span class="content">Menu</span><span class="delimiter">&quot;</span></span>).getString(<span class="string"><span class="delimiter">&quot;</span><span class="content">defaultImg</span><span class="delimiter">&quot;</span></span>),
            isScrollable
        );
    }

    <span class="directive">public</span> ContextualMenu(Screen screen, <span class="predefined-type">String</span> <span class="predefined-type">UID</span>, Vector2f position, Vector2f dimensions,
            <span class="type">boolean</span> isScrollable) {
        <span class="local-variable">this</span>(screen, <span class="predefined-type">UID</span>, position, dimensions,
            screen.getStyle(<span class="string"><span class="delimiter">&quot;</span><span class="content">Menu</span><span class="delimiter">&quot;</span></span>).getVector4f(<span class="string"><span class="delimiter">&quot;</span><span class="content">resizeBorders</span><span class="delimiter">&quot;</span></span>),
            screen.getStyle(<span class="string"><span class="delimiter">&quot;</span><span class="content">Menu</span><span class="delimiter">&quot;</span></span>).getString(<span class="string"><span class="delimiter">&quot;</span><span class="content">defaultImg</span><span class="delimiter">&quot;</span></span>),
            isScrollable
        );
    }
    <span class="directive">public</span> ContextualMenu(Screen screen, <span class="predefined-type">String</span> <span class="predefined-type">UID</span>, Vector2f position, Vector2f dimensions,
            Vector4f resizeBorders, <span class="predefined-type">String</span> defaultImg, <span class="type">boolean</span> isScrollable) {
        <span class="comment">// Call the super class to construct our basic menu</span>
        <span class="local-variable">super</span>(screen, <span class="predefined-type">UID</span>, position, dimensions, resizeBorders, defaultImg, <span class="predefined-constant">false</span>);
    }
}</code></pre></div></div></div>
<div class="sect3"><h4 id="step-2-adding-a-public-method-for-building-standard-options">STEP 2: Adding a public method for building standard options</h4><div class="paragraph"><p>This method will be used by calling windows to ensure the menu starts with only the default options.  If the particular calling window needs extra options, we can add them once this method is called.</p></div>
<div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">void</span> resetMenuOptions() {
    <span class="comment">// First, clear the current menuItems</span>
    getMenuItems().clear();
    <span class="comment">// Now add the default items</span>
    <span class="comment">/** Parameters:
      * String caption
      * Object value - We'll store a String that gives us a hint as to the menu item function
      * Menu subMenu - null, because there isn't one
      * boolean isToggleItem - adds a CheckBox to the menu item
      */</span>
    addMenuItem(<span class="string"><span class="delimiter">&quot;</span><span class="content">Lock window position</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">position</span><span class="delimiter">&quot;</span></span>, <span class="predefined-constant">null</span>, <span class="predefined-constant">true</span>);
    addMenuItem(<span class="string"><span class="delimiter">&quot;</span><span class="content">Lock window size</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">dimensions</span><span class="delimiter">&quot;</span></span>, <span class="predefined-constant">null</span>, <span class="predefined-constant">true</span>);
    addMenuItem(<span class="string"><span class="delimiter">&quot;</span><span class="content">Lock current alpha setting</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">alpha</span><span class="delimiter">&quot;</span></span>, <span class="predefined-constant">null</span>, <span class="predefined-constant">true</span>);
}</code></pre></div></div></div></div>
<div class="sect2"><h3 id="adding-our-new-control-to-the-screen">Adding Our New Control to the Screen</h3><div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// Create a single instance of the reusable contextual menu</span>
ContextualMenu rcMenu = <span class="keyword">new</span> ContextualMenu(screen, <span class="string"><span class="delimiter">&quot;</span><span class="content">rcMenu</span><span class="delimiter">&quot;</span></span>, Vector2f.ZERO) {
    <span class="comment">// Override the abstract event method</span>
    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="type">void</span> onMenuItemClicked(<span class="type">int</span> index, <span class="predefined-type">Object</span> value, <span class="type">boolean</span> isToggled) {
        <span class="comment">// Now we will pass this through to our calling window.</span>
        getCallerElement().setOption((<span class="predefined-type">String</span>)value, isToggled);
    }
};
rcMenu.resetMenuOptions();
screen.add(rcMenu);</code></pre></div></div></div>
<div class="sect2"><h3 id="extending-the-window-class-to-utilize-our-control">Extending the Window Class to Utilize Our Control</h3><div class="sect3"><h4 id="step-1-extend-the-window-class-and-add-a-few-methods">STEP 1: Extend the window class and add a few methods</h4><div class="paragraph"><p>We need to entend the window class in order to add right-click event handling and handle the setOption() method call from our ContextualMenu class.</p></div>
<div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="directive">abstract</span> <span class="type">class</span> <span class="class">ContextualWindow</span> <span class="directive">extends</span> <span class="predefined-type">Window</span> <span class="directive">implements</span> MouseButtonListener {
    <span class="comment">// Add the 3 standard contructors from the Window class and rename them</span>

    <span class="comment">// implement all abstract methods from the listener and add the following to right mouse button up:</span>
    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="type">void</span> onRightMouseReleased(MouseButtonEvent evt) {
        ContextualMenu rcMenu = screen.getElementById(<span class="string"><span class="delimiter">&quot;</span><span class="content">rcMenu</span><span class="delimiter">&quot;</span></span>);
        <span class="comment">// set the toggle state for each of the options</span>
        rcMenu.getMenuItem(<span class="integer">0</span>).setIsToggled(getIsMovable());
        rcMenu.getMenuItem(<span class="integer">1</span>).setIsToggled(getIsResizable());
        rcMenu.getMenuItem(<span class="integer">2</span>).setIsToggled(getIgnoreGlobalAlpha());
        <span class="comment">// Show the menu</span>
        rcMenu.showMenu(<span class="local-variable">this</span>, screen.getMouseXY().x, screen.getMouseXY().y);
    }

    <span class="comment">// Add the setOption method tohandle menu item events</span>
    <span class="directive">public</span> <span class="type">void</span> setOption(<span class="predefined-type">String</span> value, <span class="type">boolean</span> isToggled) {
        <span class="keyword">if</span> (value.equals(<span class="string"><span class="delimiter">&quot;</span><span class="content">position</span><span class="delimiter">&quot;</span></span>)) {
            setIsMovable(isToggled);
        } <span class="keyword">else</span> <span class="keyword">if</span> (value.equals(<span class="string"><span class="delimiter">&quot;</span><span class="content">dimensions</span><span class="delimiter">&quot;</span></span>)) {
            setIsResizable(isToggled);
        } <span class="keyword">else</span> <span class="keyword">if</span> (value.equals(<span class="string"><span class="delimiter">&quot;</span><span class="content">alpha</span><span class="delimiter">&quot;</span></span>)) {
            setIgnoreGlobalAlpha(isToggled);
        }
    }
}</code></pre></div></div></div></div></div></div><div id="footer"><div id="footer-text">Version <br>Last updated 2017-11-14 05:28:25 +00:00</div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script><script>docsearch({
  apiKey: 'a736b6d93de805e26ec2f49b55013fbd',
  indexName: 'jmonkeyengine',
  inputSelector: '#doc-search',
  debug: false // Set debug to true if you want to inspect the dropdown
});</script></body></html>