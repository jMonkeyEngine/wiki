<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]--><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="Asciidoctor 1.5.4"><title>The grass system</title><link rel="stylesheet" href="./asciidoctor.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
<link rel="stylesheet" href="./coderay-asciidoctor.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css"></head><body class="article toc2 toc-left"><div id="header"><div id="toolbar"><a href="https://github.com/jMonkeyEngine/wiki/edit/master/src/docs/asciidoc/jme3/contributions/vegetationsystem/grass.adoc"><i class="fa fa-pencil-square" aria-hidden="true"></i></a><a href="https://github.com/jMonkeyEngine/wiki/new/master/src/docs/asciidoc/jme3/contributions/vegetationsystem/"><i class="fa fa-plus-square" aria-hidden="true"></i></a><input dir="auto" style="position: relative; vertical-align: top;" spellcheck="false" autocomplete="off" class="searchbox__input aa-input" id="doc-search" name="search" placeholder="Search in the doc" required="required" type="search"></div><h1>The grass system</h1><div class="details"><span class="author" id="author"></span><br><span id="revnumber">version ,</span> <span id="revdate">2016/03/17 20:48</span></div><div id="toc" class="toc2"><div id="toctitle">Table of Contents</div><ul class="sectlevel1"><li><a href="#simplegrasstest-java">SimpleGrassTest.java</a></li><li><a href="#rendering-vegetation-basic">Rendering vegetation (Basic)</a><ul class="sectlevel2"><li><a href="#alpha-textures">Alpha textures</a></li><li><a href="#coloring-depth">Coloring &amp; Depth</a></li><li><a href="#alpha-to-coverage">Alpha to coverage</a></li></ul></li></ul></div></div><div id="content"><div id="preamble"><div class="sectionbody"><div class="paragraph"><p>Here you will learn how to use the grass system. The test project available on the project page contains enough well-commented examples to get you going, but there are some more information available here.</p></div></div></div>
<div class="sect1"><h2 id="simplegrasstest-java">SimpleGrassTest.java</h2><div class="sectionbody"><div class="paragraph"><p>The demo project contains an example named SimpleGrassTest.java. That class has a method named setupForester().
It is well commented, and can be used as a primer on how to set up a simple grass system. The basic approach is this:</p></div>
<div class="paragraph"><p>1) Create a Forester object, and initialize it.</p></div>
<div class="paragraph"><p>2) Use it to create a grass-loader.</p></div>
<div class="paragraph"><p>3) Use the grassloader to create a map-provider. The map-provider is used to feed the grass-loader with densitymaps.</p></div>
<div class="paragraph"><p>4) Use the grassloader to create one grass-layer for each type of grass. Each type of grass has its own grasslayer object which contains the material settings, the actual grass texture, and lots of other settings. Each layer also has their own instance of the planting algorithm, so that each type of grass can be planted in it&#8217;s own way.</p></div>
<div class="paragraph"><p>5) Tweak everything until you&#8217;re happy with the way it looks/runs.</p></div>
<div class="paragraph"><p>6) Make sure you call forester.update() each frame.</p></div></div></div>
<div class="sect2"><h3 id="rendering-vegetation-basic">Rendering vegetation (Basic)</h3><div class="paragraph"><p>Here is some basic information and tips here on how to make a vegetation system more efficient and/or better looking. There are also links to more in-depth jME tutorials on each subject, where there are any.</p></div>
<div class="sect2"><h3 id="alpha-textures">Alpha textures</h3><div class="paragraph"><p>Grass and foliage often use alpha textures. Alpha textures are partially (or fully) transparent. A standard alpha texture contains the RGB channels, but also an additional alpha channel where the transparency values are stored.</p></div>
<div class="paragraph"><p>There is a tutorial on how to work with alpha textures and transparency here: <a href="../../../jme3/beginner/hello_material.html">jme3:beginner:hello_material</a></p></div></div>
<div class="sect2"><h3 id="coloring-depth">Coloring &amp; Depth</h3><div class="paragraph"><p>Materials have something called additional renderstate options. They can be found in the material editor. When rendering grass, you usually want to look at these settings:</p></div>
<div class="paragraph"><p><strong>FaceCull:</strong> When using fixed quads it should be set to “Off. This means both sides of the quads will be rendered. When using billboarded grass, you can cull the back side, because it never faces the camera.</p></div>
<div class="paragraph"><p><strong>Blending mode:</strong> With grass you&#8217;d normally be using <strong>Alpha</strong>. The <strong>AlphaTestFallof</strong> parameter should also be set, but the value to use depends a lot on the texture. It may be worth trying a few different values.</p></div>
<div class="paragraph"><p><strong>DepthWrite/DepthCheck:</strong> Both of those should normally be checked.</p></div>
<div class="paragraph"><p><strong>ColorWrite:</strong> This should always be on.</p></div></div>
<div class="sect2"><h3 id="alpha-to-coverage">Alpha to coverage</h3><div class="paragraph"><p>Alpha to coverage (AtoC) is a method used to smooth out the edges of grass and such. It is an alternative to regular alpha blending. In jME you enable it through the rendermanager, or renderer:</p></div>
<div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java">renderer.setAlphaToCoverage(<span class="predefined-constant">true</span>);</code></pre></div></div>
<div class="paragraph"><p>There&#8217;s an example in the Forester test project that shows how you enable it, and how you use it in Forester.</p></div>
<div class="paragraph"><p>Alpha to coverage works through multi-sampling, and you have to use 4xMSAA in order for it to work. It is a fairly new technique and may not be supported on older graphics-cards. It is also implemented differently by different vendors, and while some cards “technically support it, it may not work as intended. This means it&#8217;s always a good idea to provide an alternative to AtoC in your apps/games.</p></div>
<div class="paragraph"><p><a href="http://en.wikipedia.org/wiki/Alpha_to_coverage">http://en.wikipedia.org/wiki/Alpha_to_coverage</a></p></div></div></div></div><div id="footer"><div id="footer-text">Version <br>Last updated 2017-11-14 05:28:25 +00:00</div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script><script>docsearch({
  apiKey: 'a736b6d93de805e26ec2f49b55013fbd',
  indexName: 'jmonkeyengine',
  inputSelector: '#doc-search',
  debug: false // Set debug to true if you want to inspect the dropdown
});</script></body></html>