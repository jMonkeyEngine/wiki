<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]--><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="Asciidoctor 1.5.4"><title>The Forester</title><link rel="stylesheet" href="./asciidoctor.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
<link rel="stylesheet" href="./coderay-asciidoctor.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css"></head><body class="article toc2 toc-left"><div id="header"><div id="toolbar"><a href="https://github.com/jMonkeyEngine/wiki/edit/master/src/docs/asciidoc/jme3/contributions/vegetationsystem.adoc"><i class="fa fa-pencil-square" aria-hidden="true"></i></a><a href="https://github.com/jMonkeyEngine/wiki/new/master/src/docs/asciidoc/jme3/contributions/"><i class="fa fa-plus-square" aria-hidden="true"></i></a><input dir="auto" style="position: relative; vertical-align: top;" spellcheck="false" autocomplete="off" class="searchbox__input aa-input" id="doc-search" name="search" placeholder="Search in the doc" required="required" type="search"></div><h1>The Forester</h1><div class="details"><span class="author" id="author"></span><br><span id="revnumber">version ,</span> <span id="revdate">2016/03/17 20:48</span></div><div id="toc" class="toc2"><div id="toctitle">Table of Contents</div><ul class="sectlevel1"><li><a href="#the-forester-basic">The Forester (Basic)</a></li><li><a href="#the-grass">The grass</a></li><li><a href="#the-trees">The trees</a></li><li><a href="#tuning-the-paging-engine-advanced">Tuning the paging engine (Advanced)</a><ul class="sectlevel2"><li><a href="#manipulating-the-cache">Manipulating the cache</a></li><li><a href="#changing-the-tile-size-resolution">Changing the tile size &amp; resolution</a></li></ul></li></ul></div></div><div id="content"><div id="preamble"><div class="sectionbody"><div class="paragraph"><p>This is the wiki page for the Forester grass/tree loading system. It contains information on how to add vegetation to a scene, and how to manage it. Grass and trees are treated differently, but the approaches are very similar.</p></div>
<div class="paragraph"><p>Topics are flagged as (basic) or (advanced). Advanced topics can be skipped.</p></div>
<div class="paragraph"><p>The library can be found in the Github <a href="https://github.com/jMonkeyEngine-Contributions">jMonkeyEngine Contributions repository</a>.</p></div></div></div>
<div class="sect1"><h2 id="the-forester-basic">The Forester (Basic)</h2><div class="sectionbody"><div class="paragraph"><p>The Forester class is the root class of this lib. You can use it to create grass/treeloaders, and a few other things. It also manages random number tables and a few other things.</p></div>
<div class="paragraph"><p>It is a singleton class, so it can be used anywhere for easy access to Forester data.</p></div></div></div>
<div class="sect1"><h2 id="the-grass">The grass</h2><div class="sectionbody"><div class="paragraph"><p>Proceed to the grass section: <a href="../../jme3/contributions/vegetationsystem/grass.html">jme3:contributions:vegetationsystem:grass</a></p></div></div></div>
<div class="sect1"><h2 id="the-trees">The trees</h2><div class="sectionbody"><div class="paragraph"><p>Proceed to the tree section: <a href="../../jme3/contributions/vegetationsystem/trees.html">jme3:contributions:vegetationsystem:trees</a></p></div></div></div>
<div class="sect2"><h3 id="tuning-the-paging-engine-advanced">Tuning the paging engine (Advanced)</h3><div class="paragraph"><p>All tree/grassloaders use a paging engine to load/unload data. There are some things you can do that affects performance and memory usage for both trees and grass.</p></div>
<div class="sect2"><h3 id="manipulating-the-cache">Manipulating the cache</h3><div class="paragraph"><p>The cache saves expired tiles for some time before disposing of them. This makes it possible for the engine to re-use pages instead of having to load and prepare them again.</p></div>
<div class="paragraph"><p>An example: Lets say you walk across the border between two tiles. Passing the border between two tiles prompts the engine to load new tiles in the direction you are moving, and toss old ones away. Lets say you then walk back directly. Or keep walking back and forth across that border. Without the cache, you&#8217;d be loading and unloading tiles all the time.</p></div>
<div class="paragraph"><p>There is no point in turning it off, unless maybe if you use extremely small tiles. You can change the cache timer however. Default time is 2 seconds (2000 ms actually, the value is in ms). After 2 seconds the tiles are dropped from the cache.</p></div>
<div class="paragraph"><p>To change the value, do this:</p></div>
<div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java">grassLoader.getPagingManager().setCacheTime(<span class="integer">6000</span>);</code></pre></div></div>
<div class="paragraph"><p>That would increase the cache time to 6 seconds.</p></div></div>
<div class="sect2"><h3 id="changing-the-tile-size-resolution">Changing the tile size &amp; resolution</h3><div class="paragraph"><p>The tile size determines how much geometry is being loaded at the same time. The resolution determines how many sub-geometries are in a tile.
If you increase resolution from 2 to 4, it would change the amount of geometries in a tile from 4 to 16. You can think of resolution as being the height/width of an image. If you double it, the size of the image is squared.</p></div>
<div class="paragraph"><p>Having few but large geometries is more efficient when rendering, however. That is how GPUs work; they rather take a few large blocks of data then many small ones. It also leads to less java objects, less overhead etc.</p></div>
<div class="paragraph"><p>Having many geometries, on the other side, ensures more geometry is culled on average. If you use one mega-block of 512x512 square units, you&#8217;d have to render the entire block even if you can only see a tiny fraction of it. Also, when massive blocks are pushed in and out of the rendering queue you might get noticeable increases/drops in frame-rate.</p></div>
<div class="paragraph"><p>It is very hard to say what is the correct resolution in an application, because it depends on very much, but it is possible to try a few different settings and see which is best. This may have an effect on performance; particularly if you&#8217;re using massive amounts of grass.</p></div>
<div class="admonitionblock tip"><table><tr><td class="icon"><i class="fa icon-tip" title="Tip"></i></td><td class="content"><div class="literalblock"><div class="content"><pre>It is generally not good to use gigantic geometries, or tiny ones - but larger is better than smaller.</pre></div></div></td></tr></table></div>
<div class="paragraph"><p>More to come.</p></div></div></div></div><div id="footer"><div id="footer-text">Version <br>Last updated 2017-11-14 05:28:25 +00:00</div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script><script>docsearch({
  apiKey: 'a736b6d93de805e26ec2f49b55013fbd',
  indexName: 'jmonkeyengine',
  inputSelector: '#doc-search',
  debug: false // Set debug to true if you want to inspect the dropdown
});</script></body></html>