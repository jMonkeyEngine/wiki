<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]--><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="Asciidoctor 1.5.4"><meta name="keywords" content="camera, documentation"><title>Multiple Camera Views</title><link rel="stylesheet" href="./asciidoctor.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
<link rel="stylesheet" href="./coderay-asciidoctor.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css"></head><body class="article toc2 toc-left"><div id="header"><div id="toolbar"><a href="https://github.com/jMonkeyEngine/wiki/edit/master/src/docs/asciidoc/jme3/advanced/multiple_camera_views.adoc"><i class="fa fa-pencil-square" aria-hidden="true"></i></a><a href="https://github.com/jMonkeyEngine/wiki/new/master/src/docs/asciidoc/jme3/advanced/"><i class="fa fa-plus-square" aria-hidden="true"></i></a><input dir="auto" style="position: relative; vertical-align: top;" spellcheck="false" autocomplete="off" class="searchbox__input aa-input" id="doc-search" name="search" placeholder="Search in the doc" required="required" type="search"></div><h1>Multiple Camera Views</h1><div class="details"><span class="author" id="author"></span><br><span id="revnumber">version ,</span> <span id="revdate">2016/03/17 20:48</span></div><div id="toc" class="toc2"><div id="toctitle">Table of Contents</div><ul class="sectlevel1"><li><a href="#how-to-resize-and-position-viewports">How to resize and Position ViewPorts</a></li><li><a href="#four-time-split-screen">Four-Time Split Screen</a><ul class="sectlevel2"><li><a href="#set-up-the-first-view">Set up the First View</a></li><li><a href="#set-up-three-more-views">Set Up Three More Views</a></li></ul></li><li><a href="#picture-in-picture">Picture in Picture</a></li><li><a href="#viewport-settings">ViewPort Settings</a></li></ul></div></div><div id="content"><div id="preamble"><div class="sectionbody"><div class="paragraph"><p>You can split the screen and look into the 3D scene from different camera angles at the same time. E.g. you can have two rootnodes with different scene graphs, and two viewPorts, each of which can only see its own subset of the scene with its own subset of port-processing filters, so you get two very different views of the scene.</p></div>
<div class="paragraph"><p>The packages used in this example are <code>com.jme3.renderer.Camera</code> and <code>com.jme3.renderer.ViewPort</code>. You can get the full sample code here: <a href="https://github.com/jMonkeyEngine/jmonkeyengine/blob/master/jme3-examples/src/main/java/jme3test/renderer/TestMultiViews.java">TestMultiViews.java</a></p></div></div></div>
<div class="sect1"><h2 id="how-to-resize-and-position-viewports">How to resize and Position ViewPorts</h2><div class="sectionbody"><div class="paragraph"><p>The default viewPort is as big as the window. If you have several, they must be of different sizes, either overlapping or adjacent to one another. How do you tell jME which of the ViewPorts should appear where on the screen, and how big they should be?</p></div>
<div class="paragraph"><p>Imagine the window as a 1.0f x 1.0f rectangle. The default cam&#8217;s viewPort is set to</p></div>
<div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java">cam.setViewPort(<span class="float">0f</span>, <span class="float">1f</span>, <span class="float">0f</span>, <span class="float">1f</span>);</code></pre></div></div>
<div class="paragraph"><p>This setting makes the ViewPort take up the whole rectangle.</p></div>
<div class="paragraph"><p>The four values are read in the following order:</p></div>
<div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java">cam.setViewPort(x1,x2 , y1,y2);</code></pre></div></div>
<div class="ulist"><ul><li><p><strong>X-axis</strong> from left to right</p></li><li><p><strong>Y-axis</strong> upwards from bottom to top</p></li></ul></div>
<div class="paragraph"><p>Here are a few examples:</p></div>
<div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java">cam1.setViewPort( <span class="float">0.0f</span> , <span class="float">1.0f</span>   ,   <span class="float">0.0f</span> , <span class="float">1.0f</span> );
cam2.setViewPort( <span class="float">0.5f</span> , <span class="float">1.0f</span>   ,   <span class="float">0.0f</span> , <span class="float">0.5f</span> );</code></pre></div></div>
<div class="paragraph"><p>These viewport parameters are, (in this order) the left-right extend, and the bottom-top extend of a views&#8217;s rectangle on the screen.</p></div>
<div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code>0.0 , 1.0       1.0 , 1.0
       +-----+-----+
       |cam1       |
       |           |
       |     +-----+
       |     |     |
       |     |cam2 |
       +-----+-----+
0.0 , 0.0       1.0 , 0.0</code></pre></div></div>
<div class="paragraph"><p>Example: Cam2&#8217;s rectangle is in the bottom right: It extends from mid (x1=0.5f) bottom (y1=0.0f), to right (x2=1.0f) mid (y2=0.5f)</p></div>
<div class="admonitionblock important"><table><tr><td class="icon"><i class="fa icon-important" title="Important"></i></td><td class="content"><div class="paragraph"><p>If you scale the views in a way so that the aspect ratio of a ViewPort is different than the window&#8217;s aspect ratio, then the ViewPort appears distorted. In these cases, you must recreate (not clone) the ViewPort&#8217;s cam object with the right aspect ratio. For example: <code>Camera cam5 = new Camera(100,100);</code></p></div></td></tr></table></div></div></div>
<div class="sect2"><h3 id="four-time-split-screen">Four-Time Split Screen</h3><div class="paragraph"><p>In this example, you create four views (2x2) with the same aspect ratio as the window, but each is only half the width and height.</p></div>
<div class="sect2"><h3 id="set-up-the-first-view">Set up the First View</h3><div class="paragraph"><p>You use the preconfigured Camera <code>cam</code> and <code>viewPort</code> from <code>SimpleApplication</code> for the first view. It&#8217;s in the bottom right.</p></div>
<div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java">cam.setViewPort(<span class="float">.5f</span>, <span class="float">1f</span>, <span class="float">0f</span>, <span class="float">0.5f</span>); <span class="comment">// Resize the viewPort to half its size, bottom right.</span></code></pre></div></div>
<div class="paragraph"><p>Optionally, place the main camera in the scene and rotate it in its start position.</p></div>
<div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java">cam.setLocation(<span class="keyword">new</span> Vector3f(<span class="float">3.32f</span>, <span class="float">4.48f</span>, <span class="float">4.28f</span>));
cam.setRotation(<span class="keyword">new</span> Quaternion (-<span class="float">0.07f</span>, <span class="float">0.92f</span>, -<span class="float">0.25f</span>, -<span class="float">0.27f</span>));</code></pre></div></div></div>
<div class="sect2"><h3 id="set-up-three-more-views">Set Up Three More Views</h3><div class="paragraph"><p>Here is the outline for how you create the three other cams and viewPorts (<a href="http://code.google.com/p/jmonkeyengine/source/browse/trunk/engine/src/test/jme3test/renderer/TestMultiViews.java">Full code sample is here</a>.) In the code snippet, <code>cam_n</code> stand for <code>cam_2</code> - <code>cam_4</code>, respectively, same for <code>view_n</code>.</p></div>
<div class="olist arabic"><ol class="arabic"><li><p>Clone the first cam to reuse its settings</p></li><li><p>Resize and position the cam&#8217;s viewPort with setViewPort().</p></li><li><p>(Optionally) Move the cameras in the scene and rotate them so they face what you want to see.</p></li><li><p>Create a ViewPort for each camera</p></li><li><p>Reset the camera&#8217;s enabled statuses</p></li><li><p>Attach the Node to be displayed to this ViewPort. +The camera doesn&#8217;t have to look at the rootNode, but that is the most common use case.</p></li></ol></div>
<div class="paragraph"><p>Here is the abstract code sample for camera <code>n</code>:</p></div>
<div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java">Camera cam_n    = cam.clone();
cam_n.setViewPort(...); <span class="comment">// resize the viewPort</span>
cam_n.setLocation(<span class="keyword">new</span> Vector3f(...));
cam_n.setRotation(<span class="keyword">new</span> Quaternion(...));

ViewPort view_n = renderManager.createMainView(<span class="string"><span class="delimiter">&quot;</span><span class="content">View of camera #n</span><span class="delimiter">&quot;</span></span>, cam_n);
view_n.setClearEnabled(<span class="predefined-constant">true</span>);
view_n.attachScene(rootNode);
view_n.setBackgroundColor(ColorRGBA.Black);</code></pre></div></div>
<div class="paragraph"><p>To visualize what you do, use the following drawing of the viewport positions:</p></div>
<div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code>0.0 , 1.0       1.0 , 1.0
       +-----+-----+
       |     |     |
       |cam3 |cam4 |
       +-----------+
       |     |     |
       |cam2 |cam1 |
       +-----+-----+
0.0 , 0.0       1.0 , 0.0</code></pre></div></div>
<div class="paragraph"><p>This are the lines of code that set the four cameras to create a four-times split screen.</p></div>
<div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java">cam1.setViewPort( <span class="float">0.5f</span> , <span class="float">1.0f</span>  ,  <span class="float">0.0f</span> , <span class="float">0.5f</span>);
...
cam2.setViewPort( <span class="float">0.0f</span> , <span class="float">0.5f</span>  ,  <span class="float">0.0f</span> , <span class="float">0.5f</span>);
...
cam3.setViewPort( <span class="float">0.0f</span> , <span class="float">0.5f</span>  ,  <span class="float">0.5f</span> , <span class="float">1.0f</span>);
...
cam4.setViewPort( <span class="float">0.5f</span> , <span class="float">1.0f</span>  ,  <span class="float">0.5f</span> , <span class="float">1.0f</span>);</code></pre></div></div></div></div>
<div class="sect1"><h2 id="picture-in-picture">Picture in Picture</h2><div class="sectionbody"><div class="paragraph"><p>The following code snippet sets up two views, one covers the whole screen, and the second is a small view in the top center.</p></div>
<div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code>       +-----+-----+
       |   |cam|   |
       |   | 2 |   |
       +   +---+   +
       |           |
       |    cam    |
       +-----+-----+</code></pre></div></div>
<div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// Setup first full-window view</span>
cam.setViewPort(<span class="float">0f</span>, <span class="float">1f</span>, <span class="float">0f</span>, <span class="float">1f</span>);
cam.setLocation(<span class="keyword">new</span> Vector3f(<span class="float">3.32f</span>, <span class="float">4.48f</span>, <span class="float">4.28f</span>));
cam.setRotation(<span class="keyword">new</span> Quaternion(-<span class="float">0.07f</span>, <span class="float">0.92f</span>, -<span class="float">0.25f</span>, -<span class="float">0.27f</span>));

<span class="comment">// Setup second, smaller PiP view</span>
Camera cam2 = cam.clone();
cam2.setViewPort(<span class="float">.4f</span>, <span class="float">.6f</span>, <span class="float">0.8f</span>, <span class="float">1f</span>);
cam2.setLocation(<span class="keyword">new</span> Vector3f(-<span class="float">0.10f</span>, <span class="float">1.57f</span>, <span class="float">4.81f</span>));
cam2.setRotation(<span class="keyword">new</span> Quaternion(<span class="float">0.00f</span>, <span class="float">0.99f</span>, -<span class="float">0.04f</span>, <span class="float">0.02f</span>));
ViewPort viewPort2 = renderManager.createMainView(<span class="string"><span class="delimiter">&quot;</span><span class="content">PiP</span><span class="delimiter">&quot;</span></span>, cam2);
viewPort2.setClearFlags(<span class="predefined-constant">true</span>, <span class="predefined-constant">true</span>, <span class="predefined-constant">true</span>);
viewPort2.attachScene(rootNode);</code></pre></div></div></div></div>
<div class="sect1"><h2 id="viewport-settings">ViewPort Settings</h2><div class="sectionbody"><div class="paragraph"><p>You can customize the camera and the viewPort of each view individually. For example, each view can have a different background color:</p></div>
<div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java">viewPort.setBackgroundColor(ColorRGBA.Blue);</code></pre></div></div>
<div class="paragraph"><p>You have full control to determine which Nodes the camera can see! It can see the full rootNode…</p></div>
<div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java">viewPort1.attachScene(rootNode);</code></pre></div></div>
<div class="paragraph"><p>… or you can give each camera a special node whose content it can see:</p></div>
<div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java">viewPort2.attachScene(spookyGhostDetectorNode);</code></pre></div></div></div></div></div><div id="footer"><div id="footer-text">Version <br>Last updated 2017-11-14 05:28:25 +00:00</div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script><script>docsearch({
  apiKey: 'a736b6d93de805e26ec2f49b55013fbd',
  indexName: 'jmonkeyengine',
  inputSelector: '#doc-search',
  debug: false // Set debug to true if you want to inspect the dropdown
});</script></body></html>