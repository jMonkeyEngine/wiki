<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]--><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="Asciidoctor 1.5.4"><meta name="keywords" content="beginner, intro, documentation, lightnode, material, model, node, gui, hud, texture"><title>jMonkeyEngine 3 Tutorial (3) - Hello Assets</title><link rel="stylesheet" href="./asciidoctor.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
<link rel="stylesheet" href="./coderay-asciidoctor.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css"></head><body class="article toc2 toc-left"><div id="header"><div id="toolbar"><a href="https://github.com/jMonkeyEngine/wiki/edit/master/src/docs/asciidoc/jme3/beginner/hello_asset_pt.adoc"><i class="fa fa-pencil-square" aria-hidden="true"></i></a><a href="https://github.com/jMonkeyEngine/wiki/new/master/src/docs/asciidoc/jme3/beginner/"><i class="fa fa-plus-square" aria-hidden="true"></i></a><input dir="auto" style="position: relative; vertical-align: top;" spellcheck="false" autocomplete="off" class="searchbox__input aa-input" id="doc-search" name="search" placeholder="Search in the doc" required="required" type="search"></div><h1>jMonkeyEngine 3 Tutorial (3) - Hello Assets</h1><div class="details"><span class="author" id="author"></span><br><span id="revnumber">version ,</span> <span id="revdate">2016/03/17 20:48</span></div><div id="toc" class="toc2"><div id="toctitle">Table of Contents</div><ul class="sectlevel1"><li><a href="#amostra-de-código">Amostra de Código</a></li><li><a href="#o-gerenciador-de-ativo">O gerenciador de ativo</a><ul class="sectlevel2"><li><a href="#carregando-texturas">Carregando Texturas</a></li><li><a href="#carregando-texto-e-fontes">Carregando Texto e Fontes</a></li><li><a href="#carregando-um-modelo">Carregando um modelo</a></li><li><a href="#carregando-ativos-de-caminhos-personalizados">Carregando Ativos de Caminhos Personalizados</a></li></ul></li><li><a href="#criando-modelos-e-cenas">Criando Modelos e Cenas</a><ul class="sectlevel2"><li><a href="#formatos-de-arquivo-de-modelo">Formatos de Arquivo de Modelo</a></li><li><a href="#carregando-modelos-e-a-cena">Carregando Modelos e a Cena</a></li></ul></li><li><a href="#exercício-como-carregar-ativos">Exercício - Como Carregar Ativos</a></li><li><a href="#conclusão">Conclusão</a></li></ul></div></div><div id="content"><div id="preamble"><div class="sectionbody"><div class="paragraph"><p>Anterior: <a href="../../jme3/beginner/hello_node_pt.html">Hello Node pt</a>,
Próximo: <a href="../../jme3/beginner/hello_main_event_loop_pt.html">Hello Update Loop pt</a></p></div>
<div class="paragraph"><p>Neste tutorial nós aprenderemos a carregar modelos 3D e colcoar texto no grafo de cena, usando o <a href="../../jme3/advanced/asset_manager.html">Gerenciador de Ativo (Asset Manager)</a> da JME. Você também aprenderá como determinar os caminhos corretos, e quais formatos de arquivo usar.</p></div>
<div style="text-align: center;" class="imageblock"><div class="content"><img src="../../jme3/beginner/beginner-assets-models.png" alt="beginner-assets-models.png" width="320" height="250"></div></div>
<div class="admonitionblock tip"><table><tr><td class="icon"><i class="fa icon-tip" title="Tip"></i></td><td class="content"><div class="paragraph"><p><a href="../../sdk/sample_code.html">Problema no achar os arquivos para executar a amostra?</a> Para conseguir os ativos (modelos 3D), adicione o arquivo <code>jme3-test-data.jar</code> incluso para seu classpath. no projeto criado com o SDK da jMonkeyEngine (recomendado), simplesmente dê um clique com o botão direito em seu projeto, escolha “Propriedades (“Properties), vá para “Bibliotecas (“Libraries), pressione “Adicionar Biblioteca (“Add Library) e adiciona a biblioteca pré-configurada “jme3-test-data library.</p></div></td></tr></table></div></div></div>
<div class="sect1"><h2 id="amostra-de-código">Amostra de Código</h2><div class="sectionbody"><div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">jme3test.helloworld</span>;

<span class="keyword">import</span> <span class="include">com.jme3.app.SimpleApplication</span>;
<span class="keyword">import</span> <span class="include">com.jme3.font.BitmapText</span>;
<span class="keyword">import</span> <span class="include">com.jme3.light.DirectionalLight</span>;
<span class="keyword">import</span> <span class="include">com.jme3.material.Material</span>;
<span class="keyword">import</span> <span class="include">com.jme3.math.Vector3f</span>;
<span class="keyword">import</span> <span class="include">com.jme3.scene.Geometry</span>;
<span class="keyword">import</span> <span class="include">com.jme3.scene.Spatial</span>;
<span class="keyword">import</span> <span class="include">com.jme3.scene.shape.Box</span>;

<span class="comment">/** Sample 3 - how to load an OBJ model, and OgreXML model,
 * a material/texture, or text. */</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">HelloAssets</span> <span class="directive">extends</span> SimpleApplication {

    <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {
        HelloAssets app = <span class="keyword">new</span> HelloAssets();
        app.start();
    }

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="type">void</span> simpleInitApp() {

        Spatial teapot = assetManager.loadModel(<span class="string"><span class="delimiter">&quot;</span><span class="content">Models/Teapot/Teapot.obj</span><span class="delimiter">&quot;</span></span>);
        Material mat_default = <span class="keyword">new</span> Material(
            assetManager, <span class="string"><span class="delimiter">&quot;</span><span class="content">Common/MatDefs/Misc/ShowNormals.j3md</span><span class="delimiter">&quot;</span></span>);
        teapot.setMaterial(mat_default);
        rootNode.attachChild(teapot);

        <span class="comment">// Create a wall with a simple texture from test_data</span>
        <span class="predefined-type">Box</span> box = <span class="keyword">new</span> <span class="predefined-type">Box</span>(Vector3f.ZERO, <span class="float">2.5f</span>,<span class="float">2.5f</span>,<span class="float">1.0f</span>);
        Spatial wall = <span class="keyword">new</span> Geometry(<span class="string"><span class="delimiter">&quot;</span><span class="content">Box</span><span class="delimiter">&quot;</span></span>, box );
        Material mat_brick = <span class="keyword">new</span> Material(
            assetManager, <span class="string"><span class="delimiter">&quot;</span><span class="content">Common/MatDefs/Misc/Unshaded.j3md</span><span class="delimiter">&quot;</span></span>);
        mat_brick.setTexture(<span class="string"><span class="delimiter">&quot;</span><span class="content">ColorMap</span><span class="delimiter">&quot;</span></span>,
            assetManager.loadTexture(<span class="string"><span class="delimiter">&quot;</span><span class="content">Textures/Terrain/BrickWall/BrickWall.jpg</span><span class="delimiter">&quot;</span></span>));
        wall.setMaterial(mat_brick);
        wall.setLocalTranslation(<span class="float">2.0f</span>,-<span class="float">2.5f</span>,<span class="float">0.0f</span>);
        rootNode.attachChild(wall);

        <span class="comment">// Display a line of text with a default font</span>
        guiNode.detachAllChildren();
        guiFont = assetManager.loadFont(<span class="string"><span class="delimiter">&quot;</span><span class="content">Interface/Fonts/Default.fnt</span><span class="delimiter">&quot;</span></span>);
        BitmapText helloText = <span class="keyword">new</span> BitmapText(guiFont, <span class="predefined-constant">false</span>);
        helloText.setSize(guiFont.getCharSet().getRenderedSize());
        helloText.setText(<span class="string"><span class="delimiter">&quot;</span><span class="content">Hello World</span><span class="delimiter">&quot;</span></span>);
        helloText.setLocalTranslation(<span class="integer">300</span>, helloText.getLineHeight(), <span class="integer">0</span>);
        guiNode.attachChild(helloText);

        <span class="comment">// Load a model from test_data (OgreXML + material + texture)</span>
        Spatial ninja = assetManager.loadModel(<span class="string"><span class="delimiter">&quot;</span><span class="content">Models/Ninja/Ninja.mesh.xml</span><span class="delimiter">&quot;</span></span>);
        ninja.scale(<span class="float">0.05f</span>, <span class="float">0.05f</span>, <span class="float">0.05f</span>);
        ninja.rotate(<span class="float">0.0f</span>, -<span class="float">3.0f</span>, <span class="float">0.0f</span>);
        ninja.setLocalTranslation(<span class="float">0.0f</span>, -<span class="float">5.0f</span>, -<span class="float">2.0f</span>);
        rootNode.attachChild(ninja);
        <span class="comment">// You must add a light to make the model visible</span>
        DirectionalLight sun = <span class="keyword">new</span> DirectionalLight();
        sun.setDirection(<span class="keyword">new</span> Vector3f(-<span class="float">0.1f</span>, -<span class="float">0.7f</span>, -<span class="float">1.0f</span>));
        rootNode.addLight(sun);

    }
}</code></pre></div></div>
<div class="paragraph"><p>Compile e execute a amostra de código. Você deveria ver um ninja verde com um bule colorido permanecendo atrás de uma parede. O texto na tela deveria dizer “Hello World.</p></div></div></div>
<div class="sect2"><h3 id="o-gerenciador-de-ativo">O gerenciador de ativo</h3><div class="paragraph"><p><strong>Por ativos de jogo nós queremos dizer todos os arquivos multimídia, tais como modelos, materiais e texturas, cenas inteiras, shaders customizados, música e arquivos de som, e fontes customizadas.</strong> JME3 vem com um objeto AssetManager prático que ajuda você a acessar seus ativos.
O AssetManager pode carregar arquivos de:</p></div>
<div class="ulist"><ul><li><p>O classpath atual (o nível do topo de seu diretório de projeto),</p></li><li><p>O diretório <code>ativos</code> de seu projeto, e</p></li><li><p>opcionalmente, caminhos persoanlizados que você registrar.</p></li></ul></div>
<div class="paragraph"><p>O seguinte é a estrutura de diretório recomendada em seu diretório de projeto:</p></div>
<div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code>MyGame/assets/Interface/
MyGame/assets/MatDefs/
MyGame/assets/Materials/
MyGame/assets/Models/
MyGame/assets/Scenes/
MyGame/assets/Shaders/
MyGame/assets/Sounds/
MyGame/assets/Textures/
MyGame/build.xml            &lt;-- Ant build script
MyGame/src/...              &lt;-- Java sources go here
MyGame/...</code></pre></div></div>
<div class="paragraph"><p>Isto é apenas um melhor prática sugerida, e é o que você consegue por padrão quando criando um novo projeto Java no <a href="../../jme3/beginner/sdk.html">SDK</a> da jMokeyEngine. Você pode criar um diretório de ativos e tecnicamente nomear os subdiretórios da maneira que você gostar.</p></div>
<div class="sect2"><h3 id="carregando-texturas">Carregando Texturas</h3><div class="paragraph"><p>Coloque suas texturas em um subdiretório de <code>assets/Textures/</code>. Carregue a textura em um material antes que você configure o Material. A seguinte amostra de código é do método <code>simpleInitApp()</code> e carrega um modelo de parede simples:</p></div>
<div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// Create a wall with a simple texture from test_data</span>
<span class="predefined-type">Box</span> box = <span class="keyword">new</span> <span class="predefined-type">Box</span>(Vector3f.ZERO, <span class="float">2.5f</span>,<span class="float">2.5f</span>,<span class="float">1.0f</span>);
Spatial wall = <span class="keyword">new</span> Geometry(<span class="string"><span class="delimiter">&quot;</span><span class="content">Box</span><span class="delimiter">&quot;</span></span>, box );
Material mat_brick = <span class="keyword">new</span> Material(
    assetManager, <span class="string"><span class="delimiter">&quot;</span><span class="content">Common/MatDefs/Misc/Unshaded.j3md</span><span class="delimiter">&quot;</span></span>);
mat_brick.setTexture(<span class="string"><span class="delimiter">&quot;</span><span class="content">ColorMap</span><span class="delimiter">&quot;</span></span>,
    assetManager.loadTexture(<span class="string"><span class="delimiter">&quot;</span><span class="content">Textures/Terrain/BrickWall/BrickWall.jpg</span><span class="delimiter">&quot;</span></span>));
wall.setMaterial(mat_brick);
wall.setLocalTranslation(<span class="float">2.0f</span>,-<span class="float">2.5f</span>,<span class="float">0.0f</span>);
rootNode.attachChild(wall);</code></pre></div></div>
<div class="paragraph"><p>Neste caso, você <a href="../../jme3/beginner/hello_material.html">cria seu próprio Material</a> e aplica ele para a geometria (Geometry). Você baseia Materiais nas descrições de material padrão (por exemplo, “Unshaded.j3md), como mostrado neste exemplo.</p></div></div>
<div class="sect2"><h3 id="carregando-texto-e-fontes">Carregando Texto e Fontes</h3><div class="paragraph"><p>Este exemplo exibe o texto “Hello World na fonte padrão na aresta do fundo da janela. Você anexa texto para o nó da <abbr title="Graphical User Interface">GUI</abbr> (<code>guiNode</code>) – isto é um nó especial para elementos de exibição plana (ortogonal). Você exibe texto para mostrar a pontuação do jogo, a saúde do jogador, etc.
A seguinte amostra de código vai no método <code>simpleInitApp()</code>.</p></div>
<div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// Display a line of text with a default font</span>
guiNode.detachAllChildren();
guiFont = assetManager.loadFont(<span class="string"><span class="delimiter">&quot;</span><span class="content">Interface/Fonts/Default.fnt</span><span class="delimiter">&quot;</span></span>);
BitmapText helloText = <span class="keyword">new</span> BitmapText(guiFont, <span class="predefined-constant">false</span>);
helloText.setSize(guiFont.getCharSet().getRenderedSize());
helloText.setText(<span class="string"><span class="delimiter">&quot;</span><span class="content">Hello World</span><span class="delimiter">&quot;</span></span>);
helloText.setLocalTranslation(<span class="integer">300</span>, helloText.getLineHeight(), <span class="integer">0</span>);
guiNode.attachChild(helloText);</code></pre></div></div>
<div class="paragraph"><p><strong>Dica:</strong> Limpe o texto existente no nó da <abbr title="Graphical User Interface">GUI</abbr> (guiNode) por retirar todas as suas crianças.</p></div></div>
<div class="sect2"><h3 id="carregando-um-modelo">Carregando um modelo</h3><div class="paragraph"><p>Exporte seu modelo 3D no formato OgreXML (.mesh.xml, .scene, .material, .skeleton.xml) e coloque ele em um subdiretório de <code>assets/Models/</code>. A seguinte amostra de código vai no método <code>simpleInitApp()</code>.</p></div>
<div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// Load a model from test_data (OgreXML + material + texture)</span>
Spatial ninja = assetManager.loadModel(<span class="string"><span class="delimiter">&quot;</span><span class="content">Models/Ninja/Ninja.mesh.xml</span><span class="delimiter">&quot;</span></span>);
ninja.scale(<span class="float">0.05f</span>, <span class="float">0.05f</span>, <span class="float">0.05f</span>);
ninja.rotate(<span class="float">0.0f</span>, -<span class="float">3.0f</span>, <span class="float">0.0f</span>);
ninja.setLocalTranslation(<span class="float">0.0f</span>, -<span class="float">5.0f</span>, -<span class="float">2.0f</span>);
rootNode.attachChild(ninja);
<span class="comment">// You must add a directional light to make the model visible!</span>
DirectionalLight sun = <span class="keyword">new</span> DirectionalLight();
sun.setDirection(<span class="keyword">new</span> Vector3f(-<span class="float">0.1f</span>, -<span class="float">0.7f</span>, -<span class="float">1.0f</span>).normalizeLocal());
rootNode.addLight(sun);</code></pre></div></div>
<div class="paragraph"><p>Note que você precisa criar um Material se você exportou o modelo com um material. Lembre-se de adicionar uma fonte de luz, como mostrado, de outra maneira o material (e o modelo inteiro) não estará visível!</p></div></div>
<div class="sect2"><h3 id="carregando-ativos-de-caminhos-personalizados">Carregando Ativos de Caminhos Personalizados</h3><div class="paragraph"><p>E seu jogo dependen de arquivos de modelo fornecidos pelo usuário, que não estão inclusos na distribuição? Se um arquivo não é localizado no local padrão (e.g. diretório de ativos), você pode registrar um localizador (Locator) customizado e carregá-lo de qualquer caminho.</p></div>
<div class="paragraph"><p>Aqui está um exemplo de uso de um ZipLocator que está registrado para um arquivo <code>town.zip</code> no nível topo de seu diretório de projeto:</p></div>
<div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java">    assetManager.registerLocator(<span class="string"><span class="delimiter">&quot;</span><span class="content">town.zip</span><span class="delimiter">&quot;</span></span>, ZipLocator.class);
    Spatial scene = assetManager.loadModel(<span class="string"><span class="delimiter">&quot;</span><span class="content">main.scene</span><span class="delimiter">&quot;</span></span>);
    rootNode.attachChild(scene);</code></pre></div></div>
<div class="literalblock"><div class="content"><pre>Aque está um HttpZipLocator que pode baixar modelos zipados e carregá-los:</pre></div></div>
<div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java">    assetManager.registerLocator(
      <span class="string"><span class="delimiter">&quot;</span><span class="content">http://jmonkeyengine.googlecode.com/files/wildhouse.zip</span><span class="delimiter">&quot;</span></span>,
      HttpZipLocator.class);
    Spatial scene = assetManager.loadModel(<span class="string"><span class="delimiter">&quot;</span><span class="content">main.scene</span><span class="delimiter">&quot;</span></span>);
    rootNode.attachChild(scene);</code></pre></div></div>
<div class="paragraph"><p>JME3 oferece ClasspathLocator, ZipLocator, FileLocator, HttpZipLocator, e UrlLocator (Veja <code>com.jme3.asset.plugins</code>).</p></div></div></div>
<div class="sect2"><h3 id="criando-modelos-e-cenas">Criando Modelos e Cenas</h3><div class="paragraph"><p>Para criar modelos 3D e cenas, você precisa de um editor de malha 3D (3D Mesh Editor) com um plugin exportador (Exporter) OgreXML. Por exemplo, você pode <a href="http://en.wikibooks.org/wiki/Blender_3D:_Noob_to_Pro/UV_Map_Basics"> criar modelos completamente texturizados com Blender</a>.</p></div>
<div class="paragraph"><p>Você pode usar o <a href="../../sdk.html">SDK</a> para <a href="../../sdk/model_loader_and_viewer.html">carregar modelos</a>, <a href="../../sdk/blender.html">converter modelos</a> e <a href="../../sdk/scene_composer.html">criar cenas</a> deles.</p></div>
<div class="paragraph"><p>Se você usar Blender, exporte seus modelos como malhas Ogre XML com materiais como se segue:</p></div>
<div class="olist arabic"><ol class="arabic"><li><p>Abra o menu Arquivo (File) &gt; Exportar (Export) &gt; Exportador OgreXML (OgreXML Exporter) para abrir o diálogo do exportador.</p></li><li><p>No campo Exportar Materiais (Export Materials): Dê ao material o mesmo nome que o modelo. Por exemplo, o modelo <code>something.mesh.xml</code> acompanha <code>something.material</code>, mais (opcionalmente) <code>something.skeleton.xml</code> e alguns arquivos de textura JPG.</p></li><li><p>No campo Exportar Malhas (Export Meshes): Selecione um subdiretório de seu diretório <code>assets/Models/</code> directory. E.g. <code>assets/Models/something/</code>.</p></li><li><p>Ative as seguintes configurações do exportador:</p><div class="ulist"><ul><li><p>Copiar Texturas (Copy Textures): YES</p></li><li><p>Renderizar materiais (Rendering Materials): YES</p></li><li><p>Virar Eixos (Flip Axis): YES</p></li><li><p>Requer Materiais (Require Materials): YES</p></li><li><p>Nome do Esqueleto segue o da malha (Skeleton name follows mesh): YES</p></li></ul></div></li><li><p>Clique em exportar.</p></li></ol></div>
<div class="sect2"><h3 id="formatos-de-arquivo-de-modelo">Formatos de Arquivo de Modelo</h3><div class="paragraph"><p>JME3 pode carregar modelos Ogre XML + materials, Ogre DotScenes, bem como modelos Wavefront OBJ+MTL models. O código loadModel() trabalha com estes arquivos quando você executa o código diretamente do SDK da jMonkeyEngine SDK.</p></div>
<div class="paragraph"><p>Se você construir os executáveis usando o scrit de construção padrão, então os arquivos de modelo originais (XML, OBJ, etc) não são inclusos. Quando você executar o executável, você obetrá uma mensagem de erro se você tentar carregar quaisquer modelos diretamente:</p></div>
<div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code>com.jme3.asset.DesktopAssetManager loadAsset
WARNING: Cannot locate resource: Models/Ninja/Ninja.mesh.xml
com.jme3.app.Application handleError
SEVERE: Uncaught exception thrown in Thread[LWJGL Renderer Thread,5,main]
java.lang.NullPointerException</code></pre></div></div>
<div class="paragraph"><p>Carregando os arquivos XML/OBJ diretamente é somente aceitável durante a fase de desenvolvimento. Se seus projetista gráfico coloca arquivos atualizados para o diretório de ativos, você pode rapidamente revisar a versão mais recente em seu ambiente de desenvolvimento.</p></div>
<div class="paragraph"><p>Para teste e para a construção de liberação final, voc~e usa arquivos .j3o exclusivamente. J3o é um formato binário otimizado para aplicações jME3, e arquivos .j3o são automaticamente inclusos no arquivo JAR distribuível pelo script de construção. Quando você faz construções de teste de QA (Quality and Assurance - Averiguação da Qualidade) ou está pronto para liberar, use o <a href="../../sdk.html">SDK</a> para <a href="../../sdk/model_loader_and_viewer.html">converter</a> todos os arquivos .obj/.scene/.xml/.blend para .j3o, e somente carregue as versões .j3o.</p></div>
<div class="paragraph"><p>Abra seu Projeto JME3 no SDK da jMonkeyEngine.</p></div>
<div class="olist arabic"><ol class="arabic"><li><p>Dê um clique com o botão direito em um arquivo .Blend, .OBJ, ou .mesh.xml file na janela Projetos (Projects), e escolha “converter para binário JME3 (“convert to JME3 binary)..</p></li><li><p>O arquivo .j3o aparece próximo ao arquivo .mesh.xml file e tem o mesmo nome.</p></li><li><p>Mude todas as linhas do seu loadModel() de acordo. Por exemplo:</p></li></ol></div>
<div class="listingblock"><div class="content"><pre>Spatial ninja = assetManager.loadModel("Models/Ninja/Ninja.j3o");</pre></div></div>
<div class="paragraph"><p>Se seu executável dá uma exceção em tempo de execução, tenha certeza de que você converteu todos os modelos para .j3o!</p></div></div>
<div class="sect2"><h3 id="carregando-modelos-e-a-cena">Carregando Modelos e a Cena</h3><table class="tableblock frame-all grid-all spread"><colgroup><col style="width: 50%;"><col style="width: 50%;"></colgroup><thead><tr><th class="tableblock halign-left valign-top">tarefa?</th><th class="tableblock halign-left valign-top">Solução!</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><div><div class="paragraph"><p>Carregar um modelo com materiais</p></div></div></td><td class="tableblock halign-left valign-top"><div><div class="paragraph"><p>Use o método <code>loadModel()</code> do gerenciador de ativo (asset manager) e anexe o Spatial para o nó raiz (rootNode).</p></div>
<div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java">Spatial elephant = assetManager.loadModel(<span class="string"><span class="delimiter">&quot;</span><span class="content">Models/Elephant/Elephant.mesh.xml</span><span class="delimiter">&quot;</span></span>);
rootNode.attachChild(elephant);</code></pre></div></div>
<div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java">Spatial elephant = assetManager.loadModel(<span class="string"><span class="delimiter">&quot;</span><span class="content">Models/Elephant/Elephant.j3o</span><span class="delimiter">&quot;</span></span>);
rootNode.attachChild(elephant);</code></pre></div></div></div></td></tr><tr><td class="tableblock halign-left valign-top"><div><div class="paragraph"><p>carregar um modelo sem materiais</p></div></div></td><td class="tableblock halign-left valign-top"><div><div class="paragraph"><p>Se você tiver um modelo sem materiais, você tem de dár a ele um material para fazê-lo visível.</p></div>
<div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java">Spatial teapot = assetManager.loadModel(<span class="string"><span class="delimiter">&quot;</span><span class="content">Models/Teapot/Teapot.j3o</span><span class="delimiter">&quot;</span></span>);
Material mat = <span class="keyword">new</span> Material(assetManager, <span class="string"><span class="delimiter">&quot;</span><span class="content">Common/MatDefs/Misc/ShowNormals.j3md</span><span class="delimiter">&quot;</span></span>); <span class="comment">// default material</span>
teapot.setMaterial(mat);
rootNode.attachChild(teapot);</code></pre></div></div></div></td></tr><tr><td class="tableblock halign-left valign-top"><div><div class="paragraph"><p>Carregar uma cena</p></div></div></td><td class="tableblock halign-left valign-top"><div><div class="paragraph"><p>Você carrega cenas da mesma forma que você carrega modelos:</p></div>
<div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java">Spatial scene = assetManager.loadModel(<span class="string"><span class="delimiter">&quot;</span><span class="content">Scenes/town/main.scene</span><span class="delimiter">&quot;</span></span>);
rootNode.attachChild(scene);</code></pre></div></div>
<div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java">Spatial scene = assetManager.loadModel(<span class="string"><span class="delimiter">&quot;</span><span class="content">Scenes/town/main.j3o</span><span class="delimiter">&quot;</span></span>);
rootNode.attachChild(scene);</code></pre></div></div></div></td></tr></tbody></table></div></div>
<div class="sect1"><h2 id="exercício-como-carregar-ativos">Exercício - Como Carregar Ativos</h2><div class="sectionbody"><div class="paragraph"><p>Como um exercício, vamos tentar diferentes maneiras de carregar uma cena. Você aprenderá a como carregar a cena diretamente, ou de um arquivo zip.</p></div>
<div class="olist arabic"><ol class="arabic"><li><p><a href="http://jmonkeyengine.googlecode.com/svn/trunk/engine/town.zip">baixe a cena de amostra town.zip</a>.</p></li><li><p>(Opcional:) Dezipe o arquivo town.zip para ver a estrutura da Ogre dotScene contida: Você terá um diretório chamado <code>town</code>. Ele contém arquivos XML e textura, e o arquivo chamado main.scene. (Isto é apenas para sua informação, você não precisa fazer nada com ele.)</p></li><li><p>Coloque o arquivo town.zip no diretório topo de nível de seu projeto JME3, assim:</p></li></ol></div>
<div class="listingblock"><div class="content"><pre>jMonkeyProjects/MyGameProject/assets/
jMonkeyProjects/MyGameProject/build.xml
jMonkeyProjects/MyGameProject/src/
jMonkeyProjects/MyGameProject/town.zip
...</pre></div></div>
<div class="paragraph"><p>Use o seguinte método para carregar modelos de um arquivo zip:</p></div>
<div class="olist arabic"><ol class="arabic"><li><p>Verifique se <code>town.zip</code> está no diretório do projeto.</p></li><li><p>Registre um localizador de arquivo zip para o diretório do projeto: Adicione o seguinte código sobre <code>simpleInitApp(){</code></p></li></ol></div>
<div class="listingblock"><div class="content"><pre>    assetManager.registerLocator("town.zip", ZipLocator.class);
    Spatial gameLevel = assetManager.loadModel("main.scene");
    gameLevel.setLocalTranslation(0, -5.2f, 0);
    gameLevel.setLocalScale(2);
    rootNode.attachChild(gameLevel);</pre></div></div>
<div class="paragraph"><p>O método loadModel() agora pesquisa pelo arquivo zip diretamente para carregar os arquivos (isto significa, não escreva <code>loadModel(town.zip/main.scene)</code> ou similar!)</p></div>
<div class="olist arabic"><ol class="arabic"><li><p>Limpe, construa e execute o projeto. +Você deveria agora ver o Ninja+parede+bule permanecendo em uma cidade.</p></li></ol></div>
<div class="paragraph"><p><strong>Dica:</strong>  se você registrar novos localizadores, tenha certeza de que você não tenha quaisquer conflitos de nome: Não nomeie todas as cenas <code>main.scene</code> mas dê a cada cena um nome único.</p></div>
<div class="paragraph"><p>Anteriormente neste tutorial, você carregou cenas e modelos do diretório de ativo. Isto é a maneira mais comum que você estará carregando cenas e modelos. Aqui está o procedimento típico:</p></div>
<div class="olist arabic"><ol class="arabic"><li><p>Remova o código que você adicionou para o exercício anterior.</p></li><li><p>Mova o diretório dezipado <code>town/</code> no diretório <code>assets/Scenes/</code> de seu projeto.</p></li><li><p>Adicione o seguinte código sobre <code>simpleInitApp() {</code></p></li></ol></div>
<div class="listingblock"><div class="content"><pre>    Spatial gameLevel = assetManager.loadModel("Scenes/town/main.scene");
    gameLevel.setLocalTranslation(0, -5.2f, 0);
    gameLevel.setLocalScale(2);
    rootNode.attachChild(gameLevel);</pre></div></div>
<div class="literalblock"><div class="content"><pre>Note que o caminho é relativo ao diretório `assets/…`.</pre></div></div>
<div class="olist arabic"><ol class="arabic"><li><p>Limpe, construa e execute o projeto. De novo, você deveria ver o Ninja+parede+bule em uma cidade.</p></li></ol></div>
<div class="paragraph"><p>Aqui está um terceiro método que você deve conhecer, carregando uma cena/modelo de um arquivo .j3o:</p></div>
<div class="olist arabic"><ol class="arabic"><li><p>Remova o código do exercício anterior.</p></li><li><p>Se você j´pa não fez, abra o <a href="../../sdk.html">SDK</a> e abra o projeto que contém a classe HelloAsset..</p></li><li><p>Na janela de projetos, navegue para o diretório <code>assets/Scenes/town</code>.</p></li><li><p>Dê um clique com o botão direito em <code>main.scene</code> e converta a cena para binário: A jMonkeyPlatform gera um arquivo main.j3o.</p></li><li><p>Adicione o seguinte código em <code>simpleInitApp() {</code></p></li></ol></div>
<div class="listingblock"><div class="content"><pre>    Spatial gameLevel = assetManager.loadModel("Scenes/town/main.j3o");
    gameLevel.setLocalTranslation(0, -5.2f, 0);
    gameLevel.setLocalScale(2);
    rootNode.attachChild(gameLevel);</pre></div></div>
<div class="literalblock"><div class="content"><pre>Novamente, note que o caminho é relativo ao diretório `assets/…` directory.</pre></div></div>
<div class="olist arabic"><ol class="arabic"><li><p>Limpe, construa e execute o projeto. +De novo, você deveria ver o Ninja+parede+bule em uma cidade.</p></li></ol></div></div></div>
<div class="sect1"><h2 id="conclusão">Conclusão</h2><div class="sectionbody"><div class="paragraph"><p>Agora você sabe como popular o grafo de cena com modelos e formas estáticas, e como construir cenas. Você aprendeu como carregar ativos usando o <code>gerenciador de ativos (assetManager)</code> e você viu que os caminhos iniciam relativos ao seu diretório de projeto. Uma outra coisa importante que você aprendeu é converter modelos para o formato .j3o para os JARs executáveis etc.</p></div>
<div class="paragraph"><p>Vamos adicionar alguma ação para a cena e continuar com o  <a href="../../jme3/beginner/hello_main_event_loop-pt.html">Loop de Atualização pt</a>!
'''</p></div>
<div class="paragraph"><p><strong>See also:</strong></p></div>
<div class="ulist"><ul><li><p><a href="../../jme3/external/blender.html">O tutorial de importação Blender definitivo</a></p></li><li><p><a href="http://www.jmonkeyengine.com/forum/index.php?topic=14418.0">Instantâneos de um grande modelo carregado</a></p></li><li><p><a href="http://www.youtube.com/user/aramakara">Video tutoriais for obter OgreXML do 3DS Max usando OgreMax</a></p></li><li><p>Se você quer aprender a como carregar sons, veja <a href="../../jme3/beginner/hello_audio_pt.html">Hello Audio pt</a></p></li><li><p>Se você quer aprender mais sobre carregar materiais, veja <a href="../../jme3/beginner/hello_material_pt.html">Hello Material pt</a></p></li></ul></div></div></div></div><div id="footer"><div id="footer-text">Version <br>Last updated 2017-11-14 05:28:25 +00:00</div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script><script>docsearch({
  apiKey: 'a736b6d93de805e26ec2f49b55013fbd',
  indexName: 'jmonkeyengine',
  inputSelector: '#doc-search',
  debug: false // Set debug to true if you want to inspect the dropdown
});</script></body></html>